!function(i){i.BigVideo=function(o){var e,t,d,n=this,a="#big-video-vid",s=i('<div id="big-video-wrap"></div>'),r=(i(""),16/9),c=0,l=!1,v=!1,g=!1,p=!1,u=!1,h=[],b=i.extend({},{useFlashForFirefox:!0,forceAutoplay:!1,controls:!1,doLoop:!0},o),f=-1!=navigator.userAgent.toLowerCase().indexOf("firefox");function m(){var o=i(window).width(),t=i(window).height();o/t<r?"video"===d?(e.width(t*r).height(t),i(a).css("top",0).css("left",-(t*r-o)/2).css("height",t),i(a+"_html5_api").css("width",t*r),i(a+"_flash_api").css("width",t*r).css("height",t)):i("#big-video-image").width(t*r).height(t).css("top",0).css("left",-(t*r-o)/2):"video"===d?(e.width(o).height(o/r),i(a).css("top",-(o/r-t)/2).css("left",0).css("height",o/r),i(a+"_html5_api").css("width","100%"),i(a+"_flash_api").css("width",o).css("height",o/r)):i("#big-video-image").width(o).height(o/r).css("top",-(o/r-t)/2).css("left",0)}function y(){i("body").append('<div id="big-video-control-container"><div id="big-video-control"><a href="#!" id="big-video-control-play"></a><div id="big-video-control-middle"><div id="big-video-control-bar"><div id="big-video-control-bound-left"></div><div id="big-video-control-progress"></div><div id="big-video-control-track"></div><div id="big-video-control-bound-right"></div></div></div><div id="big-video-control-timer"></div></div></div>'),i("#big-video-control-container").css("display","none"),i("#big-video-control-track").slider({animate:!0,step:.01,slide:function(o,t){v=!0,i("#big-video-control-progress").css("width",t.value-.16+"%"),e.currentTime(t.value/100*e.duration())},stop:function(i,o){v=!1,e.currentTime(o.value/100*e.duration())}}),i("#big-video-control-bar").click((function(o){e.currentTime(o.offsetX/i(this).width()*e.duration())})),i("#big-video-control-play").click((function(o){o.preventDefault(),function(o){var t=o||"toggle";"toggle"===t&&(t=g?"pause":"play");"pause"===t?(e.pause(),i("#big-video-control-play").css("background-position","-16px"),g=!1):"play"===t&&(e.play(),i("#big-video-control-play").css("background-position","0"),g=!0)}("toggle")})),e.addEvent("timeupdate",(function(){if(!v&&e.currentTime()/e.duration()){var o=e.currentTime(),t=Math.floor(o/60),d=Math.floor(o)-60*t;d<10&&(d="0"+d);var n=e.currentTime()/e.duration()*100;i("#big-video-control-track").slider("value",n),i("#big-video-control-progress").css("width",n-.16+"%"),i("#big-video-control-timer").text(t+":"+d+"/"+c)}}))}function w(){e.play(),i("body").off("click",w)}function _(o){i(a).css("display","block"),d="video",e.src(o),u="yes"!==bgVideopath.sound,g=!0,u?(i("#big-video-control-container").css("display","none"),e.volume(0),doLoop=!0):(i("#big-video-control-container").css("display","block"),e.volume(.8),doLoop=!1),i("#big-video-image").css("display","none"),i(a).css("display","block")}b.useFlashForFirefox&&f&&(VideoJS.options.techOrder=["flash"]),n.init=function(){if(!l){i("body").prepend(s);var o=b.forceAutoplay?"autoplay":"";(e=i('<video id="'+a.substr(1)+'" class="video-js vjs-default-skin" preload="auto" data-setup="{}" '+o+" webkit-playsinline></video>")).css("position","absolute"),s.append(e),e=_V_(a.substr(1),{controls:!1,autoplay:!0,preload:"auto"}),b.controls&&y(),m(),l=!0,g=!1,b.forceAutoplay&&i("body").on("click",w),i("#big-video-vid_flash_api").attr("scale","noborder").attr("width","100%").attr("height","100%"),i(window).resize((function(){m()})),e.addEvent("loadedmetadata",(function(o){r=document.getElementById("big-video-vid_flash_api")?document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoWidth")/document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoHeight"):i("#big-video-vid_html5_api").prop("videoWidth")/i("#big-video-vid_html5_api").prop("videoHeight"),m();var t=Math.round(e.duration()),d=Math.floor(t/60),n=t-60*d;n<10&&(n="0"+n),c=d+":"+n})),e.addEvent("ended",(function(){b.doLoop&&(e.currentTime(0),e.play()),p&&(++t===h.length&&(t=0),_(h[t]))}))}},n.show=function(o,n){if(void 0===n&&(n={}),((u=!0===n.ambient)||n.doLoop)&&(b.doLoop=!0),"string"==typeof o){var c=o.substring(o.lastIndexOf(".")+1);"jpg"===c||"gif"===c||"png"===c?function(o){i("#big-video-image").remove(),e.pause(),i(a).css("display","none"),i("#big-video-control-container").css("display","none"),d="image";var t=i('<img id="big-video-image" src='+o+" />");s.append(t),i("#big-video-image").imagesLoaded((function(){r=i("#big-video-image").width()/i("#big-video-image").height(),m()}))}(o):(n.altSource&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(o=n.altSource),_(o),p=!1)}else _((h=o)[t=0]),p=!0},n.getPlayer=function(){return e}}}(jQuery);